{"version":3,"sources":["webpack:///./src/components/Modal_Product.vue?f18b","webpack:///./src/views/Products.vue?23c5","webpack:///./src/views/Products.vue","webpack:///./src/components/Modal_Product.vue","webpack:///./src/components/Modal_Product.vue?43f8","webpack:///./src/views/Products.vue?a39e"],"names":["$filters","data","tempProduct","imageUrl","isUploading","inject","mixins","modalMixin","props","product","type","Object","default","watch","this","methods","update","$emit","uploadImg","api","$refs","imgInput","files","formData","FormData","append","fetch","method","headers","Authorization","tokenValue","body","http","json","fetchData","success","console","error","addImage","imagesUrl","unshift","removeImg","url","filter","__exports__","products","pagination","currentPage","isNew","isLoading","components","Pagination","ProductModal","DeleteModal","getProducts","page","openModal","item","productModal","showModal","updateProduct","hideModal","id","JSON","stringify","pushToast","checkDelete","deleteModal","delProduct","created","render"],"mappings":"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","file":"js/chunk-bfd145c6.a7e25800.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Modal_Product.vue?vue&type=style&index=0&id=9152aef6&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Products.vue?vue&type=style&index=0&id=217a2e33&lang=scss&scoped=true\"","<template lang=\"pug\">\na.btn.btn-secondary.btn-fixed.fs-3.hover-half-transparent.text-light.border-0(\n  title=\"新增品項\" @click.prevent=\"openModal(true)\")\n  i.bi.bi-clipboard-plus\n\nsection.w-100.overflow-auto.text-nowrap(v-if=\"!!products.length\")\n\n  table.table.table-sm.table-light.table-striped.table-hover.align-middle.text-center\n\n    thead\n      tr\n        th 縮圖\n        th\n          | 商品名稱\n          i.bi.bi-pencil-square.ms-2\n        th.d-none.d-sm-table-cell 分類\n        th 售價\n        th.d-none.d-sm-table-cell 原價\n        th.d-none.d-sm-table-cell(width=\"50\") 上架\n        th\n\n    tbody\n\n      tr(v-for=\"item in products\" :key=\"item.id\")\n        td\n          .img.overflow-hidden\n            img.img-fluid(:src=\"item.imageUrl\")\n\n        td\n          a.link-dark.text-decoration-none(href=\"#\"\n            @click.prevent=\"openModal(false, item)\" title=\"編輯察看\")\n            | {{ item.title }}\n\n        td.d-none.d-sm-table-cell {{ item.category }}\n\n        td ${{ $filters.currency(item.price) }}\n\n        td.d-none.d-sm-table-cell ${{ $filters.currency(item.origin_price) }}\n\n        td.d-none.d-sm-table-cell\n          .form-switch.text-center\n            input#productEnabled.form-check-input.me-0.p-2.shadow-0(type=\"checkbox\" role=\"switch\"\n              v-model=\"item.is_enabled\" true-value=\"1\" false-value=\"0\"\n              @change=\"updateProduct(item)\")\n\n        td\n          button.border-0.hover-gray.py-2.px-2.d-block.w-100(\n            type=\"button\" title=\"編輯\"\n            @click.prevent=\"openModal(false, item)\")\n            i.bi.bi-pencil-square\n          button.border-0.hover-red.py-2.px-2.d-block.w-100(\n            type=\"button\" title=\"刪除\"\n            @click.prevent=\"checkDelete(item)\")\n            i.bi.bi-trash\n\nPagination(:pages=\"pagination\" @emit-page=\"getProducts\")\n\nProductModal(ref=\"productModal\"\n  :product=\"tempProduct\"\n  @updateProduct=\"updateProduct\")\n\nDeleteModal(ref=\"deleteModal\"\n  :item=\"tempProduct\" :itemClass=\"'商品'\"\n  @emit-delete=\"delProduct\")\n\nVueLoading(:active=\"isLoading\")\n\n</template>\n\n<script>\nimport Pagination from '@/components/Pagination.vue';\nimport ProductModal from '@/components/Modal_Product.vue';\nimport DeleteModal from '@/components/Modal_Delete.vue';\n\nexport default {\n  data() {\n    return {\n      products: [],\n      tempProduct: {},\n      pagination: {},\n      currentPage: 1,\n      isNew: false,\n      isLoading: false,\n    };\n  },\n  components: {\n    Pagination,\n    ProductModal,\n    DeleteModal,\n  },\n  inject: ['tokenValue', 'pushToast'],\n  methods: {\n    async getProducts(page = 1) {\n      this.isLoading = true;\n\n      this.currentPage = page;\n\n      const api = `\n        ${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/products?page=${this.currentPage}\n      `;\n      try {\n        const http = await fetch(api, {\n          headers: { Authorization: this.tokenValue },\n        });\n        const fetchData = await http.json();\n\n        this.products = fetchData.products;\n        this.pagination = fetchData.pagination;\n      } catch (error) {\n        console.error(error);\n      }\n      this.isLoading = false;\n    },\n\n    openModal(isNew, item) {\n      if (isNew) {\n        this.tempProduct = {};\n      } else {\n        this.tempProduct = { ...item };\n      }\n\n      this.isNew = isNew;\n      this.$refs.productModal.showModal();\n    },\n\n    async updateProduct(product) {\n      this.$refs.productModal.hideModal();\n\n      let api; let method; let page;\n\n      if (this.isNew) {\n        api = `\n          ${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product`;\n        method = 'post'; page = 1;\n      } else {\n        api = `\n          ${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${product.id}\n        `;\n        method = 'put'; page = this.currentPage;\n      }\n\n      const http = await fetch(api, {\n        method,\n        headers: {\n          Authorization: this.tokenValue,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ data: { ...product } }),\n      });\n      const fetchData = await http.json();\n\n      this.getProducts(page);\n      this.pushToast(fetchData, '產品');\n\n      this.isNew = false;\n    },\n\n    checkDelete(item) {\n      this.tempProduct = { ...item };\n      this.$refs.deleteModal.showModal();\n    },\n\n    async delProduct(item) {\n      const api = `\n        ${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/product/${item.id}\n      `;\n\n      try {\n        const http = await fetch(api, {\n          method: 'delete',\n          headers: { Authorization: this.tokenValue },\n        });\n        const data = await http.json();\n\n        this.pushToast(data, '產品');\n        this.getProducts(this.currentPage);\n      } catch (error) {\n        console.error(error);\n      }\n\n      this.$refs.deleteModal.hideModal();\n    },\n  },\n  created() {\n    this.getProducts();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.img {\n  max-width: 50px;\n  max-height: 50px;\n}\n</style>\n","<template lang=\"pug\">\n#modal_product.modal.fade(tabindex=\"-1\" ref=\"modal\")\n  .modal-dialog.modal-lg.modal-dialog-centered\n\n    form.modal-content.p-3(@submit.prevent=\"update\")\n\n      .modal-header.p-2.mb-3\n        h5.modal-title 編輯商品\n        button.btn-close(type=\"button\" data-bs-dismiss=\"modal\" aria-label=\"Close\")\n\n      .row\n        .col-sm-7\n          .hstack\n\n            .mb-4.me-2.w-70\n              label.form-label.mb-1(for=\"productTitle\") 品項名稱*：\n              input#productTitle.form-control.form-control-sm(type=\"text\" required\n                v-model=\"tempProduct.title\")\n\n            .mb-4.form-switch.w-30.text-center.p-0.d-flex.flex-column.align-items-center\n              label.form-label(for=\"productSwitch\")\n                | 上架\n              input#productSwitch.form-check-input.m-0.p-2.shadow-0(\n                type=\"checkbox\" role=\"switch\"\n                v-model=\"tempProduct.is_enabled\" :true-value=\"1\" :false-value=\"0\")\n\n          .hstack\n\n            .mb-4.me-2.w-70\n              label.form-label.mb-1(for=\"productCategory\") 品項分類*：\n              input#productCategory.form-control.form-control-sm(type=\"text\"\n                v-model=\"tempProduct.category\" required)\n\n            .mb-4.w-30\n              label.form-label.mb-1(for=\"productUnit\") 單位*：\n              input#productUnit.form-control.form-control-sm(type=\"text\"\n                v-model=\"tempProduct.unit\" required)\n\n          .hstack\n\n            .mb-4.w-50.me-2\n              label.form-label.mb-1(for=\"productOriginPrice\") 定價*：\n              input#productOriginPrice.form-control.form-control-sm(type=\"number\"\n                v-model=\"tempProduct.origin_price\"\n                placeholder=\"請輸入定價\" step=\"1\" min=\"0\" required)\n\n            .mb-4.w-50\n              label.form-label.mb-1(for=\"productPrice\") 售價*：\n              input#productPrice.form-control.form-control-sm(type=\"number\"\n                v-model=\"tempProduct.price\"\n                placeholder=\"請輸入售價\" step=\"1\" min=\"0\" required)\n\n          .form-floating.mb-4\n            textarea#productDescription.form-control.textarea(\n              v-model=\"tempProduct.description\")\n            label(for=\"productDescription\") 商品描述：\n\n          .form-floating.mb-4\n            textarea#productContent.form-control.textarea(\n              v-model=\"tempProduct.content\")\n            label(for=\"productContent\") 相關說明：\n\n        //- product image\n        .col-sm-5\n          .mb-1 商品主圖：\n\n          //- uploading animation\n          .text-center.p-3(v-if=\"isUploading\")\n            .spinner-grow\n              .visually-hidden 載入中……\n          //- image preview\n          .vstack.mt-(v-if=\"tempProduct.imageUrl\")\n            button.btn.me-auto.hover-red(type=\"button\"\n              @click.prevent=\"tempProduct.imageUrl = ''\" title=\"移除\") X\n            img.img-fluid.img-thumbnail(\n              :src=\"tempProduct.imageUrl\"\n              alt=\"圖片連結無效\")\n\n          input.form-control.form-control-sm.my-2(type=\"url\" placeholder=\"圖片網址🔗\"\n            v-model.trim=\"tempProduct.imageUrl\")\n          .mt-4\n            label.form-label.mb-1(for=\"uploadImg\") 或上傳檔案：\n            input#uploadImg.form-control.form-control-sm(type=\"file\"\n              ref=\"imgInput\"\n              @change.prevent=\"uploadImg\")\n\n          //- mutiple images\n          .mt-4\n            label.form-label.mb-1(for=\"mutitleImg\") 多圖連結：\n            .input-group\n              input#uploadImg.form-control.form-control-sm(type=\"url\"\n                placeholder=\"圖片網址🔗\"\n                v-model.trim=\"imageUrl\")\n              button.btn.btn-sm.btn-outline-gray-500(type=\"button\"\n                @click.prevent=\"addImage\")\n                | 新增圖片\n            //- preview\n            .mt-2.vstack(v-for=\"(imgUrl, key) in tempProduct.imagesUrl\" :key=\"key\")\n              button.btn.me-auto.hover-red(title=\"移除\"\n                @click.prevent=\"removeImg(imgUrl)\") X\n              img.img-fluid.img-thumbnail(:src=\"imgUrl\" title=\"圖片預覽\" alt=\"圖片連結無效\")\n\n      .modal-footer.p-0.pt-2.mt-3\n\n        button.btn.btn-cyan-600.text-white.w-30(type=\"submit\")\n          i.bi.bi-check-lg.me-2\n          | 送出\n\n        button.btn.btn-outline-gray-600.w-20(type=\"button\" data-bs-dismiss=\"modal\")\n          | 取消\n</template>\n\n<style lang=\"scss\" scoped>\n.textarea {\n  height: 100px;\n}\n</style>\n\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  data() {\n    return {\n      tempProduct: {},\n\n      // for multiple images\n      imageUrl: '',\n\n      isUploading: false,\n    };\n  },\n  inject: ['tokenValue'],\n  mixins: [modalMixin],\n  props: {\n    product: {\n      type: Object,\n      default() { return {}; },\n    },\n  },\n  watch: {\n    product() {\n      this.tempProduct = { ...this.product };\n    },\n  },\n  methods: {\n    update() {\n      this.$emit('updateProduct', this.tempProduct);\n    },\n\n    async uploadImg() {\n      this.tempProduct.imageUrl = '';\n      this.isUploading = true;\n\n      const api = `\n        ${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/upload\n      `;\n      const uploadImg = this.$refs.imgInput.files[0];\n      const formData = new FormData();\n      formData.append('file-to-upload', uploadImg);\n\n      try {\n        const http = await fetch(api, {\n          method: 'post',\n          headers: { Authorization: this.tokenValue },\n          body: formData,\n        });\n        const fetchData = await http.json();\n        if (fetchData.success) {\n          this.tempProduct.imageUrl = fetchData.imageUrl;\n          this.isUploading = false;\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    addImage() {\n      if (!this.tempProduct.imagesUrl) {\n        this.tempProduct.imagesUrl = [];\n      }\n\n      if (this.imageUrl !== '') {\n        this.tempProduct.imagesUrl.unshift(this.imageUrl);\n      }\n\n      this.imageUrl = '';\n    },\n\n    removeImg(url) {\n      this.tempProduct.imagesUrl = this.tempProduct.imagesUrl\n        .filter((imageUrl) => imageUrl !== url);\n    },\n  },\n};\n</script>\n","import { render } from \"./Modal_Product.vue?vue&type=template&id=9152aef6&scoped=true&lang=pug\"\nimport script from \"./Modal_Product.vue?vue&type=script&lang=js\"\nexport * from \"./Modal_Product.vue?vue&type=script&lang=js\"\n\nimport \"./Modal_Product.vue?vue&type=style&index=0&id=9152aef6&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\ccok1\\\\Documents\\\\2021扣訂\\\\hexschool\\\\Vue\\\\space-coffee\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9152aef6\"]])\n\nexport default __exports__","import { render } from \"./Products.vue?vue&type=template&id=217a2e33&scoped=true&lang=pug\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\n\nimport \"./Products.vue?vue&type=style&index=0&id=217a2e33&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\ccok1\\\\Documents\\\\2021扣訂\\\\hexschool\\\\Vue\\\\space-coffee\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-217a2e33\"]])\n\nexport default __exports__"],"sourceRoot":""}