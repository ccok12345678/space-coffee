(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-304d43a9"],{"130f":function(e,t,c){"use strict";c("a97c")},"2bb3":function(e,t,c){e.exports=c.p+"img/alien_ship.4875bdbe.svg"},"3bc2":function(e,t,c){"use strict";c("91b0")},"7a7f":function(e,t,c){"use strict";var n=c("7a23"),r={class:"progress-bar flex-nowarp mx-auto mb-4 text-nowrap"},a={class:"d-flex flex-column align-items-center"},o=Object(n["createElementVNode"])("div",{class:"m-auto"},"1",-1),s=[o],l=Object(n["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2 mx-1"},"購物車",-1),i={class:"d-flex mb-4"},d={class:"d-flex flex-column align-items-center"},u=Object(n["createElementVNode"])("div",{class:"m-auto"},"2",-1),b=[u],m=Object(n["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2"},"填寫資料",-1),p={class:"d-flex mb-4"},f={class:"d-flex flex-column align-items-center"},O=Object(n["createElementVNode"])("div",{class:"m-auto"},"3",-1),j=[O],h=Object(n["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2"},"建立訂單",-1),v={class:"d-flex mb-4"},x={class:"d-flex flex-column align-items-center"},g=Object(n["createElementVNode"])("div",{class:"m-auto"},"4",-1),N=[g],V=Object(n["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2"},"付款完成",-1);function E(e,t,c,o,u,O){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":u.status.isCart}])},s,2),l]),Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["bar m-auto border-secondary",{"border-info":u.status.isOrder}])},null,2)]),Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":u.status.isOrder}])},b,2),m]),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["bar m-auto border-secondary",{"border-info":u.status.isCheck}])},null,2)]),Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":u.status.isCheck}])},j,2),h]),Object(n["createElementVNode"])("div",v,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["bar m-auto border-secondary",{"border-info":c.isPaid}])},null,2)]),Object(n["createElementVNode"])("div",x,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":c.isPaid}])},N,2),V])])}var y={data:function(){return{status:{isCart:!0,isOrder:!1,isCheck:!1},isPay:!1}},props:{step:{type:String,default:function(){return""}},isPaid:{type:Boolean,default:function(){return!1}}},created:function(){switch(this.step){case"Cart":this.status.isCart=!0,this.status.isOrder=!1,this.status.isCheck=!1;break;case"Order":this.status.isCart=!0,this.status.isOrder=!0,this.status.isCheck=!1;break;case"Check":this.status.isCart=!0,this.status.isOrder=!0,this.status.isCheck=!0;break;default:this.status.isCart=!1,this.status.isOrder=!1,this.status.isCheck=!1;break}}},k=(c("130f"),c("6b0d")),C=c.n(k);const w=C()(y,[["render",E]]);t["a"]=w},"91b0":function(e,t,c){},a97c:function(e,t,c){},ebc5:function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),r=c("2bb3"),a=c.n(r),o=function(e){return Object(n["pushScopeId"])("data-v-d85b4d58"),e=e(),Object(n["popScopeId"])(),e},s={class:"container-lg my-4 text-nowrap"},l={key:0,class:"w-100 text-center text-gray-600"},i=o((function(){return Object(n["createElementVNode"])("img",{class:"cart-img w-25",src:a.a},null,-1)})),d=o((function(){return Object(n["createElementVNode"])("h5",null,"購物車是空的，快去選購吧！",-1)})),u=[i,d],b={key:1,class:"row justify-content-center"},m={class:"col-md-10 d-flex flex-column"},p={class:"row gx-2 gy-2"},f={class:"col-12 d-flex flex-column"},O={class:"mx-auto hstack"},j=o((function(){return Object(n["createElementVNode"])("h4",{class:"text-gray-700"},"購物車清單",-1)})),h=o((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-trash-fill"},null,-1)})),v=[h],x=o((function(){return Object(n["createElementVNode"])("div",{class:"devider w-25 boder-dark my-2 mx-auto"},null,-1)})),g={class:"col-1 text-start fs-5 d-flex align-items-center"},N={class:"col-11 col-md-4 text-start d-flex align-items-center"},V={class:"col-5 col-md-2 d-flex flex-md-column align-items-center align-items-md-start"},E=o((function(){return Object(n["createElementVNode"])("small",null,"數量：",-1)})),y={class:"input-group input-group-sm"},k=["onUpdate:modelValue","onChange","disabled"],C={class:"input-group-text border-0 bg-transparent"},w={class:"col-2 col-md-2 d-flex align-items-end flex-column"},B=o((function(){return Object(n["createElementVNode"])("small",null,"單價：",-1)})),T=o((function(){return Object(n["createElementVNode"])("small",null,"優惠價：",-1)})),S={class:"col-2 col-md-1 d-flex align-items-center"},$=["onClick"],D=o((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-trash"},null,-1)})),z=[D],R=o((function(){return Object(n["createElementVNode"])("div",{class:"devider w-100 border-secondary"},null,-1)})),U={class:"row justify-content-md-end justify-content-center"},_=o((function(){return Object(n["createElementVNode"])("div",{class:"col-4 d-flex mt-3"},[Object(n["createElementVNode"])("div",{class:"my-auto ms-auto"},"總計：")],-1)})),M={class:"col-8 col-md-5 d-flex mt-3"},P={class:"my-auto ms-auto text-end"},q={key:0,class:"text-muted text-decoration-line-through"},J=o((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),I={class:"fw-bold"},F=o((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),L={key:0,class:"text-success fw-normal"},A=o((function(){return Object(n["createElementVNode"])("div",{class:"devider w-75 my-3 border-secondary"},null,-1)})),G=o((function(){return Object(n["createElementVNode"])("div",{class:"col-4 d-flex"},[Object(n["createElementVNode"])("div",{class:"my-auto ms-auto"},"使用優惠卷：")],-1)})),H={class:"col-8 col-md-5 d-flex"},K=["disabled"],Q={key:0,class:"spinner-border spinner-border-sm"},W=o((function(){return Object(n["createElementVNode"])("div",{class:"visually-hidden"},"Loading...",-1)})),X=[W],Y={key:1},Z=o((function(){return Object(n["createElementVNode"])("div",{class:"devider w-75 my-3 border-secondary"},null,-1)})),ee={class:"text-center text-md-end"},te=Object(n["createTextVNode"])("填寫資料"),ce=o((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-box-arrow-right ms-2"},null,-1)})),ne=[te,ce];function re(e,t,c,r,a,o){var i=Object(n["resolveComponent"])("ProgressBar");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",s,[0===a.carts.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,u)):Object(n["createCommentVNode"])("",!0),0!==a.carts.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",b,[Object(n["createElementVNode"])("div",m,[Object(n["createVNode"])(i,{step:e.$route.name},null,8,["step"]),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("div",O,[j,Object(n["createElementVNode"])("button",{class:"btn hover-red px-3 mx-2",type:"button",title:"清空購物車",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){return o.deleteCart&&o.deleteCart.apply(o,arguments)}),["prevent"]))},v)]),x]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(a.carts.carts,(function(t,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t.id},[Object(n["createElementVNode"])("div",g,Object(n["toDisplayString"])(c+1)+" /",1),Object(n["createElementVNode"])("div",N,Object(n["toDisplayString"])(t.product.title),1),Object(n["createElementVNode"])("div",V,[E,Object(n["createElementVNode"])("div",y,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-control form-control-sm",type:"number",min:"1",step:"1","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return o.updateCart(t.id,t.qty)},disabled:a.status===t.id},null,40,k),[[n["vModelText"],t.qty]]),Object(n["createElementVNode"])("div",C,"x"+Object(n["toDisplayString"])(t.product.unit),1)])]),Object(n["createElementVNode"])("div",w,[B,Object(n["createElementVNode"])("div",null,"NT$ "+Object(n["toDisplayString"])(e.$filters.currency(t.product.price)),1)]),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["col-3 col-md-2 d-flex align-items-end flex-column",{"text-success":"coupon"in t}])},[T,Object(n["createTextVNode"])("NT$ "+Object(n["toDisplayString"])(e.$filters.currency(t.final_total)),1)],2),Object(n["createElementVNode"])("div",S,[Object(n["createElementVNode"])("button",{class:"btn hover-red px-1 d-block w-100",type:"button",title:"刪除",onClick:Object(n["withModifiers"])((function(e){return o.deleteCart(!1,t.id)}),["prevent"])},z,8,$)]),R],64)})),128))]),Object(n["createElementVNode"])("div",U,[_,Object(n["createElementVNode"])("div",M,[Object(n["createElementVNode"])("div",P,[a.carts.total>a.carts.final_total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",q,[Object(n["createTextVNode"])("NT$ "+Object(n["toDisplayString"])(e.$filters.currency(a.carts.total)),1),J])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",I,[Object(n["createTextVNode"])("NT$ "+Object(n["toDisplayString"])(e.$filters.currency(a.carts.final_total)),1),F,a.carts.total>a.carts.final_total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("small",L,"已使用優惠卷")):Object(n["createCommentVNode"])("",!0)])])]),A,G,Object(n["createElementVNode"])("div",H,[Object(n["createElementVNode"])("form",{class:"hstack ms-auto my-auto",onSubmit:t[2]||(t[2]=Object(n["withModifiers"])((function(){return o.addCoupon&&o.addCoupon.apply(o,arguments)}),["prevent"]))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-control form-control-sm w-75 me-2",type:"text",placeholder:"E-Coupon","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.coupon=e})},null,512),[[n["vModelText"],a.coupon]]),Object(n["createElementVNode"])("button",{class:"btn btn-sm btn-outline-dark w-25",type:"submit",disabled:a.isUpdating},[a.isUpdating?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Q,X)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Y,"套用"))],8,K)],32)]),Z]),Object(n["createElementVNode"])("div",ee,[Object(n["createElementVNode"])("button",{class:"btn btn-cyan-600 text-light w-30",type:"button",onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(){return o.goOrder&&o.goOrder.apply(o,arguments)}),["prevent"]))},ne)])])])):Object(n["createCommentVNode"])("",!0)])}var ae=c("1da1"),oe=(c("96cf"),c("99af"),c("d3b7"),c("e9c4"),c("7a7f")),se={data:function(){return{carts:{},coupon:"",status:"",isUpdating:!1}},components:{ProgressBar:oe["a"]},inject:["pushToast","scrollTop"],methods:{getCart:function(){var e=this;return Object(ae["a"])(regeneratorRuntime.mark((function t(){var c,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/cart\n      "),t.next=3,fetch(c);case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,e.carts=r.data;case 8:case"end":return t.stop()}}),t)})))()},deleteCart:function(){var e=arguments,t=this;return Object(ae["a"])(regeneratorRuntime.mark((function c(){var n,r,a,o,s;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return n=!(e.length>0&&void 0!==e[0])||e[0],r=e.length>1?e[1]:void 0,a=n?"".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/carts"):"\n          ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/cart/").concat(r,"\n        "),c.next=5,fetch(a,{method:"delete"});case 5:return o=c.sent,c.next=8,o.json();case 8:s=c.sent,t.pushToast(s,"購物車"),t.getCart();case 11:case"end":return c.stop()}}),c)})))()},addCoupon:function(){var e=this;return Object(ae["a"])(regeneratorRuntime.mark((function t(){var c,n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isUpdating=!0,c="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/coupon\n      "),n={data:{code:e.coupon}},t.next=5,fetch(c,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=t.sent,t.next=8,r.json();case 8:a=t.sent,e.pushToast(a,"優惠卷"),e.getCart(),e.coupon="",e.isUpdating=!1;case 13:case"end":return t.stop()}}),t)})))()},updateCart:function(e,t){var c=this;return Object(ae["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c.status=e,r="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/cart/").concat(e,"\n      "),a={data:{product_id:e,qty:t}},n.next=5,fetch(r,{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return o=n.sent,n.next=8,o.json();case 8:s=n.sent,c.pushToast(s,"購物車"),c.getCart(),c.status="";case 12:case"end":return n.stop()}}),n)})))()},goOrder:function(){this.$router.push("/order")}},created:function(){this.scrollTop(),this.getCart(),document.title="購物車 | 宇宙咖啡"}},le=(c("3bc2"),c("6b0d")),ie=c.n(le);const de=ie()(se,[["render",re],["__scopeId","data-v-d85b4d58"]]);t["default"]=de}}]);
//# sourceMappingURL=chunk-304d43a9.2e4de5ba.js.map