(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44d9cb08"],{"2a5f":function(e,t,c){"use strict";c("b9f6")},8568:function(e,t,c){e.exports=c.p+"img/ufo-svgrepo-com.8274df04.svg"},b9f6:function(e,t,c){},c238:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),o=c("8568"),r=c.n(o),a=function(e){return Object(n["pushScopeId"])("data-v-4834f410"),e=e(),Object(n["popScopeId"])(),e},l={key:0,class:"container-lg d-flex flex-column align-items-center my-5"},s=a((function(){return Object(n["createElementVNode"])("img",{class:"favor-img w-25",src:r.a,alt:"Nothing here!"},null,-1)})),i=a((function(){return Object(n["createElementVNode"])("h3",{class:"fs-4 text-gray-600 mt-3"},"還沒有收藏，先去逛逛吧！",-1)})),d=[s,i],u={key:1,class:"container-lg d-flex flex-column align-items-center my-5"},b={class:"d-flex"},m=a((function(){return Object(n["createElementVNode"])("h3",{class:"fs-4 text-gray-600"},"收藏清單",-1)})),p=a((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-trash-fill"},null,-1)})),f=[p],j=a((function(){return Object(n["createElementVNode"])("div",{class:"divider w-50 border-gray-500 mb-3"},null,-1)})),O=Object(n["createTextVNode"])("🎊 恭喜！"),v=a((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),h=Object(n["createTextVNode"])(" 完成收集活動，點此領取優惠！"),k=[O,v,h],g={key:1,class:"text-gray-500 mb-3"},E={class:"row d-flex justify-content-center w-100"},y={class:"col-md-11"},N={class:"row gy-4 d-flex justify-content-center"},x=["onClick"],V=a((function(){return Object(n["createElementVNode"])("small",null,"X 移除收藏",-1)})),C=[V];function w(e,t,c,o,r,a){var s=Object(n["resolveComponent"])("UserProductCard"),i=Object(n["resolveComponent"])("UserAlertModal"),p=Object(n["resolveComponent"])("UserPromotionModal");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[r.favorites.length?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,d)),r.favorites.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",u,[Object(n["createElementVNode"])("div",b,[m,Object(n["createElementVNode"])("button",{class:"btn btn-sm hover-red px-2 mb-2 ms-2",type:"button",title:"清空收藏清單",onClick:t[0]||(t[0]=function(e){return a.openModal("alertModal")})},f)]),j,r.favorites.length>=6?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,class:"fs-5 btn mb-4 text-cyan",type:"button",title:"領取優惠碼",onClick:t[1]||(t[1]=function(e){return a.openModal("promotionModal")})},k)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("h5",g,"增加收藏以獲取優惠！")),Object(n["createElementVNode"])("div",E,[Object(n["createElementVNode"])("div",y,[Object(n["createElementVNode"])("div",N,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(r.favorites,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"col-md-4 col-sm-6",key:e.id},[Object(n["createVNode"])(s,{tempPick:e},null,8,["tempPick"]),Object(n["createElementVNode"])("button",{class:"btn",type:"button",title:"移除收藏",onClick:function(t){return a.removeFavor(e.id)}},C,8,x)])})),128))])])])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(i,{ref:"alertModal",onEmitClear:a.clearFavors},null,8,["onEmitClear"]),Object(n["createVNode"])(p,{ref:"promotionModal"},null,512)],64)}var B=c("1da1"),M=(c("96cf"),c("99af"),c("d3b7"),c("159b"),c("4de4"),c("e9c4"),c("c010")),S=c("e6bb"),F={class:"modal fade",tabindex:"-1",ref:"modal"},I={class:"modal-dialog modal-dialog-centered"},P={class:"modal-content"},U={class:"modal-body text-center py-4"},J=Object(n["createElementVNode"])("p",{class:"mb-4"},"獲得9折優惠，太棒了！🌟",-1),T={class:"mb-4"},L=Object(n["createTextVNode"])("優惠碼："),R={key:0,class:"text-gray-500"},$=Object(n["createElementVNode"])("p",{class:"mb-4"},"馬上到購物車使用吧！",-1);function _(e,t,c,o,r,a){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",F,[Object(n["createElementVNode"])("div",I,[Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("div",U,[J,Object(n["createElementVNode"])("p",T,[L,r.isCopied?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",R,Object(n["toDisplayString"])(r.coupon)+" (已複製)",1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:1,class:"text-decoration-none text-success",href:"#",title:"複製優惠碼",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){return a.copyCoupon&&a.copyCoupon.apply(a,arguments)}),["prevent"]))},Object(n["toDisplayString"])(r.coupon)+" (複製)",1))]),$,Object(n["createElementVNode"])("button",{class:"btn btn-cyan-600 text-light w-70",type:"button","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=function(e){return r.isCopied=!1})},"確認")])])])],512)}var A=c("e0ae"),D={data:function(){return{coupon:"spacecollections",isCopied:!1}},mixins:[A["a"]],methods:{copyCoupon:function(){navigator.clipboard.writeText(this.coupon).then(this.isCopied=!0)}}},X=c("6b0d"),q=c.n(X);const z=q()(D,[["render",_]]);var G=z,H={metaInfo:{title:"收藏清單"},data:function(){return{products:[],favorites:[],key:"space-coffee-favorites"}},components:{UserProductCard:M["a"],UserPromotionModal:G,UserAlertModal:S["a"]},methods:{getProducts:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var c,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,c="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/products/all\n      "),t.prev=2,t.next=5,fetch(c);case 5:return o=t.sent,t.next=8,o.json();case 8:n=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.error(t.t0);case 14:return e.isLoading=!1,t.abrupt("return",n.products);case 16:case"end":return t.stop()}}),t,null,[[2,11]])})))()},collectFavorites:function(){var e=this,t=localStorage.getItem(this.key);t&&(t=JSON.parse(t),this.products.forEach((function(c){t.forEach((function(t){c.id===t.id&&e.favorites.push(c)}))})))},openModal:function(e){this.$refs[e].showModal()},clearFavors:function(){localStorage.setItem(this.key,""),this.favorites=[],this.$refs.alertModal.hideModal()},removeFavor:function(e){var t=JSON.parse(localStorage.getItem(this.key)),c=t.filter((function(t){return t.id!==e}));localStorage.setItem(this.key,JSON.stringify(c)),this.favorites=[],this.collectFavorites()}},created:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getProducts();case 3:e.products=t.sent,e.collectFavorites(),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}};c("2a5f");const K=q()(H,[["render",w],["__scopeId","data-v-4834f410"]]);t["default"]=K},e6bb:function(e,t,c){"use strict";var n=c("7a23"),o=c("eaaf"),r=c.n(o),a={class:"modal fade",tabindex:"-1",ref:"modal"},l={class:"modal-dialog modal-dialog-centered"},s={class:"modal-content"},i=Object(n["createElementVNode"])("div",{class:"modal-body text-center"},[Object(n["createElementVNode"])("img",{class:"spinner-slow my-3",src:r.a,width:"165",alt:"Loading..."}),Object(n["createElementVNode"])("p",{class:"fs-5 text-danger mb-0"},"確認清除所有物件？")],-1),d={class:"p-3 text-center"},u=Object(n["createElementVNode"])("i",{class:"bi bi-trash me-2"},null,-1),b=Object(n["createTextVNode"])("確認清除"),m=[u,b],p=Object(n["createElementVNode"])("button",{class:"btn btn-outline-gray-600 w-70",type:"button","data-bs-dismiss":"modal"},"取消",-1);function f(e,t,c,o,r,u){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("div",s,[i,Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("button",{class:"btn btn-danger w-70 mb-2",type:"button",onClick:t[0]||(t[0]=function(){return u.checkClear&&u.checkClear.apply(u,arguments)}),"data-bs-dismiss":"modal"},m),p])])])],512)}var j=c("e0ae"),O={data:function(){},mixins:[j["a"]],methods:{checkClear:function(){this.$emit("emit-clear")}}},v=c("6b0d"),h=c.n(v);const k=h()(O,[["render",f]]);t["a"]=k},eaaf:function(e,t,c){e.exports=c.p+"img/black_hole.cdb62289.svg"}}]);
//# sourceMappingURL=chunk-44d9cb08.c95be03e.js.map