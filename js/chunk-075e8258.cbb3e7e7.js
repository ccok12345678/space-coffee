(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-075e8258"],{1799:function(e,t,c){"use strict";var r=c("7a23"),n={key:0,class:"mt-3"},a={class:"pagination justify-content-center"},l={key:0,class:"page-item"},o=Object(r["createElementVNode"])("span",null,"⫷",-1),s=[o],d=["onClick"],i={key:1,class:"page-item"},b=Object(r["createElementVNode"])("span",null,"⫸",-1),m=[b];function p(e,t,c,o,b,p){return c.pages.total_pages>1?(Object(r["openBlock"])(),Object(r["createElementBlock"])("nav",n,[Object(r["createElementVNode"])("ul",a,[c.pages.has_pre?(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",l,[Object(r["createElementVNode"])("a",{class:"page-link",href:"#",onClick:t[0]||(t[0]=Object(r["withModifiers"])((function(e){return p.changePage(c.pages.current_page-1)}),["prevent"]))},s)])):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(c.pages.total_pages,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{class:Object(r["normalizeClass"])(["page-item",{active:e===c.pages.current_page}]),key:e},[Object(r["createElementVNode"])("a",{class:"page-link",href:"#",onClick:Object(r["withModifiers"])((function(t){return p.changePage(e)}),["prevent"])},Object(r["toDisplayString"])(e),9,d)],2)})),128)),c.pages.has_next?(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",i,[Object(r["createElementVNode"])("a",{class:"page-link",href:"#",onClick:t[1]||(t[1]=Object(r["withModifiers"])((function(e){return p.changePage(c.pages.current_page+1)}),["prevent"]))},m)])):Object(r["createCommentVNode"])("",!0)])])):Object(r["createCommentVNode"])("",!0)}var O=c("7d47"),u={props:["pages"],methods:{changePage:function(e){this.$emit("emit-page",e),Object(O["a"])()}}},j=c("6b0d"),E=c.n(j);const f=E()(u,[["render",p]]);t["a"]=f},"4b91":function(e,t,c){"use strict";var r=c("7a23"),n=c("eaaf"),a=c.n(n),l={class:"modal fade",tabindex:"-1",ref:"modal"},o={class:"modal-dialog modal-dialog-centered"},s={class:"modal-content"},d={class:"modal-body text-center"},i=Object(r["createElementVNode"])("img",{class:"spinner-slow mb-3",src:a.a,width:"165",alt:"Loading..."},null,-1),b=Object(r["createElementVNode"])("p",{class:"fs-5 text-danger"},[Object(r["createTextVNode"])("警告 "),Object(r["createElementVNode"])("i",{class:"bi bi-exclamation-diamond"}),Object(r["createTextVNode"])("：刪除後無法復原，確認刪除")],-1),m={class:"mb-0 fs-5 fw-bold text-dark"},p={key:0},O={key:1},u={class:"p-3 text-center"},j=Object(r["createElementVNode"])("i",{class:"bi bi-trash me-2"},null,-1),E=Object(r["createTextVNode"])("確認刪除"),f=[j,E],k=Object(r["createElementVNode"])("button",{class:"btn btn-outline-gray-600 w-70",type:"button","data-bs-dismiss":"modal"},"取消",-1);function h(e,t,c,n,a,j){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",l,[Object(r["createElementVNode"])("div",o,[Object(r["createElementVNode"])("div",s,[Object(r["createElementVNode"])("div",d,[i,b,Object(r["createElementVNode"])("p",m,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(c.itemClass)+"：",1),a.tempItem.title?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",p,Object(r["toDisplayString"])(a.tempItem.title)+"？",1)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",O,Object(r["toDisplayString"])(a.tempItem.id)+"？",1))])]),Object(r["createElementVNode"])("div",u,[Object(r["createElementVNode"])("button",{class:"btn btn-danger w-70 mb-2",type:"button",onClick:t[0]||(t[0]=function(){return j.check&&j.check.apply(j,arguments)})},f),k])])])],512)}var g=c("5530"),V=c("e0ae"),N={data:function(){return{tempItem:{}}},mixins:[V["a"]],props:{item:{type:Object,default:function(){return{}}},itemClass:{type:String,default:function(){return"物件"}}},watch:{item:function(){this.tempItem=Object(g["a"])({},this.item)}},methods:{check:function(){this.$emit("emit-delete",this.tempItem)}}},y=c("6b0d"),v=c.n(y);const x=v()(N,[["render",h]]);t["a"]=x},eaaf:function(e,t,c){e.exports=c.p+"img/black_hole.cdb62289.svg"},efd9:function(e,t,c){"use strict";c.r(t);c("b0c0");var r=c("7a23"),n={key:0,class:"alert alert-info"},a={key:1,class:"w-100 overflow-auto text-nowrap"},l={class:"table table-sm table-light table-striped table-hover align-middle"},o=Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",null,"下單時間"),Object(r["createElementVNode"])("th",null,"買家"),Object(r["createElementVNode"])("th",{class:"text-center d-none d-sm-table-cell"},"訂單內容"),Object(r["createElementVNode"])("th",{class:"text-center d-table-cell d-sm-none"},[Object(r["createTextVNode"])("訂單編號"),Object(r["createElementVNode"])("i",{class:"bi bi-eye ms-2"})]),Object(r["createElementVNode"])("th",{class:"text-center"},"金額"),Object(r["createElementVNode"])("th",{class:"text-center"},"付款"),Object(r["createElementVNode"])("th")])],-1),s={class:"d-none d-sm-table-cell"},d=["onClick"],i={class:"d-table-cell d-sm-none"},b=["onClick"],m={key:0,class:"text-success"},p={key:1,class:"text-danger"},O=["onClick"],u=Object(r["createElementVNode"])("i",{class:"bi bi-pencil-square"},null,-1),j=[u],E=["onClick"],f=Object(r["createElementVNode"])("i",{class:"bi bi-trash"},null,-1),k=[f];function h(e,t,c,u,f,h){var g=Object(r["resolveComponent"])("Pagination"),V=Object(r["resolveComponent"])("OrderModal"),N=Object(r["resolveComponent"])("DeleteModal"),y=Object(r["resolveComponent"])("VueLoading");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[f.orders.length?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",n,"還未收到訂單！")),f.orders.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("section",a,[Object(r["createElementVNode"])("table",l,[o,Object(r["createElementVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(f.orders,(function(t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:t.id},[Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.user.name),1),Object(r["createElementVNode"])("td",s,[Object(r["createElementVNode"])("a",{class:"link-dark text-decoration-none",href:"#",onClick:Object(r["withModifiers"])((function(e){return h.openModal(t,!1)}),["prevent"]),title:"僅可檢視"},[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(t.products,(function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("p",{class:"m-0",key:t},"• "+Object(r["toDisplayString"])(e.product.title)+"（"+Object(r["toDisplayString"])(e.product.unit)+"）*"+Object(r["toDisplayString"])(e.product.num),1)})),128))],8,d)]),Object(r["createElementVNode"])("td",i,[Object(r["createElementVNode"])("a",{class:"link-dark text-decoration-none",href:"#",onClick:Object(r["withModifiers"])((function(e){return h.openModal(t,!1)}),["prevent"])},"• "+Object(r["toDisplayString"])(t.id),9,b)]),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.$filters.currency(t.total)),1),Object(r["createElementVNode"])("td",null,[t.is_paid?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",m,"已付款")):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",p,"未付款"))]),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("button",{class:"border-0 hover-gray p-2 d-block w-100",type:"button",title:"檢視編輯",onClick:function(e){return h.openModal(t,!0)}},j,8,O),Object(r["createElementVNode"])("button",{class:"border-0 hover-red p-2 d-block w-100",type:"button",title:"刪除",onClick:function(e){return h.checkDelete(t)}},k,8,E)])])})),128))])])])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(g,{pages:f.pagination,onEmitPage:h.getOrders},null,8,["pages","onEmitPage"]),Object(r["createVNode"])(V,{ref:"orderModal",order:f.tempOrder,onEmitOrder:h.updateOrder},null,8,["order","onEmitOrder"]),Object(r["createVNode"])(N,{ref:"deleteModal",item:f.tempOrder,itemClass:"訂單",onEmitDelete:h.delOrder},null,8,["item","onEmitDelete"]),Object(r["createVNode"])(y,{active:f.isLoading},null,8,["active"])],64)}var g=c("5530"),V=c("1da1"),N=(c("96cf"),c("99af"),c("d3b7"),c("e9c4"),{class:"modal fade text-nowrap",id:"modal_order",tabindex:"-1",ref:"modal"}),y={class:"modal-dialog modal-dialog-centered overflow-auto"},v={key:0,class:"modal-content overflow-auto"},x={class:"modal-header p-3"},B={key:0,class:"m-0"},w={key:1,class:"m-0"},C=Object(r["createTextVNode"])("修改訂單"),D=Object(r["createElementVNode"])("i",{class:"bi bi-pencil-square ms-2"},null,-1),M=[C,D],S=Object(r["createElementVNode"])("button",{class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),T={class:"modal-body"},P=Object(r["createElementVNode"])("h6",{class:"fw-bold"},"訂購人資訊",-1),_={class:"row"},$=Object(r["createElementVNode"])("label",{class:"col-3 col-form-label py-1 d-block",for:"buyerName"},"訂購人：",-1),I={class:"col-9"},L=Object(r["createElementVNode"])("label",{class:"col-3 col-form-label py-1",for:"buyerEmail"},"電子信箱：",-1),z={class:"col-9"},R=["readonly"],A=Object(r["createElementVNode"])("label",{class:"col-3 col-form-label py-1",for:"buyerTel"},"電話：",-1),F={class:"col-9"},J=["readonly"],U=Object(r["createElementVNode"])("label",{class:"col-3 col-form-label py-1",for:"buyerAddress"},"地址：",-1),q={class:"col-9"},X=["readonly"],G=Object(r["createElementVNode"])("div",{class:"divider border-gray-500 w-100 mb-3"},null,-1),H=Object(r["createElementVNode"])("h6",{class:"fw-bold"},"訂單狀態",-1),K={class:"row"},Q=Object(r["createElementVNode"])("div",{class:"col-3 py-1"},"訂單編號：",-1),W={class:"col-9"},Y={class:"py-1 ps-2"},Z=Object(r["createElementVNode"])("div",{class:"col-3 py-1"},"下單日期：",-1),ee={class:"col-9"},te={class:"py-1 ps-2"},ce=Object(r["createElementVNode"])("div",{class:"col-3 py-1"},"付款金額：",-1),re={class:"col-9"},ne={class:"py-1 ps-2"},ae=Object(r["createElementVNode"])("div",{class:"col-3 py-1"},"付款狀態：",-1),le={class:"col-9 form-switch ps-3 d-flex align-items-center"},oe=["disabled"],se={class:"form-label my-0 ms-2",for:"orderIsPaid"},de={key:0,class:"text-success"},ie={key:1,class:"text-danger"},be=Object(r["createElementVNode"])("div",{class:"divider border-gray-500 w-100 mb-3"},null,-1),me=Object(r["createElementVNode"])("h6",{class:"fw-bold"},"訂單內容",-1),pe={class:"list-group list-group-flush"},Oe={class:"row"},ue={class:"col-8"},je={class:"py-2 m-0"},Ee={class:"col-4 d-flex"},fe={class:"py-2 m-0"},ke=["disabled","onClick"],he={class:"modal-footer"},ge={key:0,class:"btn btn-cyan-600 text-light",type:"button","data-bs-dismiss":"modal","aria-label":"Close"},Ve=Object(r["createElementVNode"])("button",{class:"btn btn-outline-gray-600",type:"button","data-bs-dismiss":"modal","aria-label":"Close"},"取消",-1);function Ne(e,t,c,n,a,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",N,[Object(r["createElementVNode"])("div",y,[a.tempOrder.user?(Object(r["openBlock"])(),Object(r["createElementBlock"])("form",v,[Object(r["createElementVNode"])("div",x,[a.tempOrder.isEditable?(Object(r["openBlock"])(),Object(r["createElementBlock"])("h5",w,M)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("h5",B,"檢視訂單")),S]),Object(r["createElementVNode"])("div",T,[P,Object(r["createElementVNode"])("div",_,[$,Object(r["createElementVNode"])("div",I,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:"form-control bg-transparent ps-2 form-control-plaintext buyer-input",id:"buyerName",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.tempOrder.user.name=e}),readonly:""},null,512),[[r["vModelText"],a.tempOrder.user.name]])]),L,Object(r["createElementVNode"])("div",z,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:Object(r["normalizeClass"])(["form-control bg-transparent ps-2 buyer-input",{"form-control-plaintext":!a.tempOrder.isEditable}]),id:"buyerEmail",type:"email","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.tempOrder.user.email=e}),readonly:!a.tempOrder.isEditable},null,10,R),[[r["vModelText"],a.tempOrder.user.email]])]),A,Object(r["createElementVNode"])("div",F,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:Object(r["normalizeClass"])(["form-control bg-transparent ps-2 buyer-input",{"form-control-plaintext":!a.tempOrder.isEditable}]),id:"buyerTel",type:"tel","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.tempOrder.user.tel=e}),readonly:!a.tempOrder.isEditable},null,10,J),[[r["vModelText"],a.tempOrder.user.tel]])]),U,Object(r["createElementVNode"])("div",q,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:Object(r["normalizeClass"])(["form-control bg-transparent ps-2 buyer-input",{"form-control-plaintext":!a.tempOrder.isEditable}]),id:"buyerAddress",type:"text","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.tempOrder.user.address=e}),readonly:!a.tempOrder.isEditable},null,10,X),[[r["vModelText"],a.tempOrder.user.address]])])]),G,H,Object(r["createElementVNode"])("div",K,[Q,Object(r["createElementVNode"])("div",W,[Object(r["createElementVNode"])("div",Y,Object(r["toDisplayString"])(a.tempOrder.id),1)]),Z,Object(r["createElementVNode"])("div",ee,[Object(r["createElementVNode"])("div",te,Object(r["toDisplayString"])(e.$filters.date(a.tempOrder.create_at)),1)]),ce,Object(r["createElementVNode"])("div",re,[Object(r["createElementVNode"])("div",ne,"$ "+Object(r["toDisplayString"])(e.$filters.currency(a.tempOrder.total)),1)]),ae,Object(r["createElementVNode"])("div",le,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{class:"form-check-input m-0 p-2 shadow-0",id:"orderIsPaid",type:"checkbox",role:"switch","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.tempOrder.is_paid=e}),disabled:!a.tempOrder.isEditable},null,8,oe),[[r["vModelCheckbox"],a.tempOrder.is_paid]]),Object(r["createElementVNode"])("label",se,[a.tempOrder.is_paid?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",de,"已付款")):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",ie,"未付款"))])])]),be,me,Object(r["createElementVNode"])("ul",pe,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(a.tempOrder.products,(function(t,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{class:"list-group-item p-1",key:c},[Object(r["createElementVNode"])("div",Oe,[Object(r["createElementVNode"])("div",ue,[Object(r["createElementVNode"])("p",je,"• "+Object(r["toDisplayString"])(t.product.title)+"("+Object(r["toDisplayString"])(t.product.unit)+")＊"+Object(r["toDisplayString"])(t.qty),1)]),Object(r["createElementVNode"])("div",Ee,[Object(r["createElementVNode"])("p",fe,"單價：$ "+Object(r["toDisplayString"])(e.$filters.currency(t.total)),1),Object(r["createElementVNode"])("button",{class:"btn hover-red ms-auto",type:"button",title:"刪除品項",disabled:!a.tempOrder.isEditable,onClick:function(e){return l.removeItem(c)}},"X",8,ke)])])])})),128))])]),Object(r["createElementVNode"])("div",he,[a.tempOrder.isEditable?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",ge,"確認")),a.tempOrder.isEditable?(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{key:1,class:"btn btn-cyan-600 text-light",type:"button",onClick:t[5]||(t[5]=function(){return l.updateOrder&&l.updateOrder.apply(l,arguments)})},"送出修改")):Object(r["createCommentVNode"])("",!0),Ve])])):Object(r["createCommentVNode"])("",!0)])],512)}var ye=c("e0ae"),ve={data:function(){return{tempOrder:{}}},props:{order:{type:Object,default:function(){return{}}}},mixins:[ye["a"]],watch:{order:function(){this.tempOrder=JSON.parse(JSON.stringify(this.order))}},methods:{removeItem:function(e){delete this.tempOrder.products["".concat(e)]},updateOrder:function(){this.$emit("emit-order",this.tempOrder)}}},xe=c("6b0d"),Be=c.n(xe);const we=Be()(ve,[["render",Ne]]);var Ce=we,De=c("4b91"),Me=c("1799"),Se={metaInfo:{title:"訂單"},data:function(){return{orders:[],tempOrder:{},pagination:{},currentPage:1,isLoading:!1}},components:{Pagination:Me["a"],OrderModal:Ce,DeleteModal:De["a"]},inject:["tokenValue","pushToast"],methods:{getOrders:function(){var e=arguments,t=this;return Object(V["a"])(regeneratorRuntime.mark((function c(){var r,n,a,l;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,t.isLoading=!0,t.currentPage=r,n="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/orders?page=").concat(t.currentPage,"\n      "),c.prev=4,c.next=7,fetch(n,{headers:{Authorization:t.tokenValue}});case 7:return a=c.sent,c.next=10,a.json();case 10:l=c.sent,t.orders=l.orders,t.pagination=l.pagination,c.next=18;break;case 15:c.prev=15,c.t0=c["catch"](4),console.error(c.t0);case 18:t.isLoading=!1;case 19:case"end":return c.stop()}}),c,null,[[4,15]])})))()},openModal:function(e,t){this.tempOrder=Object(g["a"])({},e),this.tempOrder.isEditable=t,this.$refs.orderModal.showModal()},updateOrder:function(e){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function c(){var r,n,a,l;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return t.$refs.orderModal.hideModal(),r="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/admin/order/").concat(e.id,"\n      "),n={data:Object(g["a"])({},e)},c.prev=3,c.next=6,fetch(r,{method:"put",headers:{Authorization:t.tokenValue,"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:return a=c.sent,c.next=9,a.json();case 9:l=c.sent,t.getOrders(t.currentPage),t.pushToast(l,"訂單"),c.next=17;break;case 14:c.prev=14,c.t0=c["catch"](3),console.error(c.t0);case 17:case"end":return c.stop()}}),c,null,[[3,14]])})))()},checkDelete:function(e){this.tempOrder=Object(g["a"])({},e),this.$refs.deleteModal.showModal()},delOrder:function(e){var t=this;return Object(V["a"])(regeneratorRuntime.mark((function c(){var r,n,a;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return t.$refs.deleteModal.hideModal(),r="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/admin/order/").concat(e.id,"\n      "),c.prev=2,c.next=5,fetch(r,{method:"delete",headers:{Authorization:t.tokenValue}});case 5:return n=c.sent,c.next=8,n.json();case 8:a=c.sent,t.pushToast(a,"訂單"),t.getOrders(t.currentPage),c.next=16;break;case 13:c.prev=13,c.t0=c["catch"](2),console.error(c.t0);case 16:case"end":return c.stop()}}),c,null,[[2,13]])})))()}},created:function(){this.getOrders()}};const Te=Be()(Se,[["render",h]]);t["default"]=Te}}]);
//# sourceMappingURL=chunk-075e8258.cbb3e7e7.js.map