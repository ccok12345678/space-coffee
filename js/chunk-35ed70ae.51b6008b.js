(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35ed70ae"],{1967:function(e,t,c){"use strict";c("a2f2")},"2bb3":function(e,t,c){e.exports=c.p+"img/alien_ship.4875bdbe.svg"},"5d82":function(e,t,c){},a2f2:function(e,t,c){},b90a:function(e,t,c){"use strict";var n=c("7a23"),a={class:"progress-bar flex-nowarp mx-auto mb-4 text-nowrap"},r={class:"d-flex flex-column align-items-center"},o=Object(n["createElementVNode"])("div",{class:"m-auto"},"1",-1),s=[o],l=Object(n["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2 mx-1"},"購物車",-1),i={class:"d-flex mb-4"},d={class:"d-flex flex-column align-items-center"},u=Object(n["createElementVNode"])("div",{class:"m-auto"},"2",-1),b=[u],m=Object(n["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2"},"填寫資料",-1),p={class:"d-flex mb-4"},f={class:"d-flex flex-column align-items-center"},O=Object(n["createElementVNode"])("div",{class:"m-auto"},"3",-1),j=[O],v=Object(n["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2"},"建立訂單",-1),h={class:"d-flex mb-4"},x={class:"d-flex flex-column align-items-center"},N=Object(n["createElementVNode"])("div",{class:"m-auto"},"4",-1),g=[N],E=Object(n["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2"},"付款完成",-1);function V(e,t,c,o,u,O){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":u.status.isCart}])},s,2),l]),Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["bar m-auto border-secondary",{"border-info":u.status.isOrder}])},null,2)]),Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":u.status.isOrder}])},b,2),m]),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["bar m-auto border-secondary",{"border-info":u.status.isCheck}])},null,2)]),Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":u.status.isCheck}])},j,2),v]),Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["bar m-auto border-secondary",{"border-info":c.isPaid}])},null,2)]),Object(n["createElementVNode"])("div",x,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":c.isPaid}])},g,2),E])])}var y={data:function(){return{status:{isCart:!0,isOrder:!1,isCheck:!1},isPay:!1}},props:{step:{type:String,default:function(){return""}},isPaid:{type:Boolean,default:function(){return!1}}},created:function(){switch(this.step){case"Cart":this.status.isCart=!0,this.status.isOrder=!1,this.status.isCheck=!1;break;case"Order":this.status.isCart=!0,this.status.isOrder=!0,this.status.isCheck=!1;break;case"Check":this.status.isCart=!0,this.status.isOrder=!0,this.status.isCheck=!0;break;default:this.status.isCart=!1,this.status.isOrder=!1,this.status.isCheck=!1;break}}},k=(c("1967"),c("6b0d")),C=c.n(k);const w=C()(y,[["render",V]]);t["a"]=w},c830:function(e,t,c){"use strict";c("5d82")},e6bb:function(e,t,c){"use strict";var n=c("7a23"),a=c("eaaf"),r=c.n(a),o={class:"modal fade",tabindex:"-1",ref:"modal"},s={class:"modal-dialog modal-dialog-centered"},l={class:"modal-content"},i=Object(n["createElementVNode"])("div",{class:"modal-body text-center"},[Object(n["createElementVNode"])("img",{class:"spinner-slow my-3",src:r.a,width:"165",alt:"Loading..."}),Object(n["createElementVNode"])("p",{class:"fs-5 text-danger mb-0"},"確認清除所有物件？")],-1),d={class:"p-3 text-center"},u=Object(n["createElementVNode"])("i",{class:"bi bi-trash me-2"},null,-1),b=Object(n["createTextVNode"])("確認清除"),m=[u,b],p=Object(n["createElementVNode"])("button",{class:"btn btn-outline-gray-600 w-70",type:"button","data-bs-dismiss":"modal"},"取消",-1);function f(e,t,c,a,r,u){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",l,[i,Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("button",{class:"btn btn-danger w-70 mb-2",type:"button",onClick:t[0]||(t[0]=function(){return u.checkClear&&u.checkClear.apply(u,arguments)}),"data-bs-dismiss":"modal"},m),p])])])],512)}var O=c("e0ae"),j={data:function(){},mixins:[O["a"]],methods:{checkClear:function(){this.$emit("emit-clear")}}},v=c("6b0d"),h=c.n(v);const x=h()(j,[["render",f]]);t["a"]=x},eaaf:function(e,t,c){e.exports=c.p+"img/black_hole.cdb62289.svg"},f9f1:function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),a=c("2bb3"),r=c.n(a),o=function(e){return Object(n["pushScopeId"])("data-v-3d97ae62"),e=e(),Object(n["popScopeId"])(),e},s={class:"container-lg my-4 text-nowrap"},l={key:0,class:"w-100 text-center text-gray-600"},i=o((function(){return Object(n["createElementVNode"])("img",{class:"cart-img w-25",src:r.a,alt:"Empty Here!"},null,-1)})),d=o((function(){return Object(n["createElementVNode"])("h5",null,"購物車是空的，快去選購吧！",-1)})),u=[i,d],b={key:1,class:"row justify-content-center"},m={class:"col-md-10 d-flex flex-column"},p={class:"row gx-2 gy-2"},f={class:"col-12 d-flex flex-column"},O={class:"mx-auto hstack"},j=o((function(){return Object(n["createElementVNode"])("h4",{class:"text-gray-700"},"購物車清單",-1)})),v=o((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-trash-fill"},null,-1)})),h=[v],x=o((function(){return Object(n["createElementVNode"])("div",{class:"divider w-25 boder-dark my-2 mx-auto"},null,-1)})),N={class:"col-1 text-start fs-5 d-flex align-items-center"},g={class:"col-11 col-md-4 text-start d-flex align-items-center"},E={class:"col-5 col-md-2 d-flex flex-md-column align-items-center align-items-md-start"},V=o((function(){return Object(n["createElementVNode"])("small",null,"數量：",-1)})),y={class:"input-group input-group-sm"},k=["onUpdate:modelValue","onChange","disabled"],C={class:"input-group-text border-0 bg-transparent"},w={class:"col-2 col-md-2 d-flex align-items-end flex-column"},B=o((function(){return Object(n["createElementVNode"])("small",null,"單價：",-1)})),T=o((function(){return Object(n["createElementVNode"])("small",null,"優惠價：",-1)})),S={class:"col-2 col-md-1 d-flex align-items-center"},$=["onClick"],M=o((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-trash"},null,-1)})),D=[M],_=o((function(){return Object(n["createElementVNode"])("div",{class:"divider w-100 border-secondary"},null,-1)})),z={class:"row justify-content-md-end justify-content-center"},R=o((function(){return Object(n["createElementVNode"])("div",{class:"col-4 d-flex mt-3"},[Object(n["createElementVNode"])("div",{class:"my-auto ms-auto"},"總計：")],-1)})),U={class:"col-8 col-md-5 d-flex mt-3"},P={class:"my-auto ms-auto text-end"},q={key:0,class:"text-muted text-decoration-line-through"},I=o((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),J={class:"fw-bold"},F=o((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),L={key:0,class:"text-success fw-normal"},A=o((function(){return Object(n["createElementVNode"])("div",{class:"divider w-75 my-3 border-secondary"},null,-1)})),H=o((function(){return Object(n["createElementVNode"])("div",{class:"col-4 d-flex"},[Object(n["createElementVNode"])("div",{class:"my-auto ms-auto"},"使用優惠卷：")],-1)})),G={class:"col-8 col-md-5 d-flex"},K=["disabled"],Q={key:0,class:"spinner-border spinner-border-sm"},W=o((function(){return Object(n["createElementVNode"])("div",{class:"visually-hidden"},"Loading...",-1)})),X=[W],Y={key:1},Z=o((function(){return Object(n["createElementVNode"])("div",{class:"divider w-75 my-3 border-secondary"},null,-1)})),ee={class:"text-center text-md-end"},te=Object(n["createTextVNode"])("填寫資料"),ce=o((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-box-arrow-right ms-2"},null,-1)})),ne=[te,ce];function ae(e,t,c,a,r,o){var i=Object(n["resolveComponent"])("ProgressBar"),d=Object(n["resolveComponent"])("AlertModal");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("div",s,[0===r.carts.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",l,u)):Object(n["createCommentVNode"])("",!0),0!==r.carts.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",b,[Object(n["createElementVNode"])("div",m,[Object(n["createVNode"])(i,{step:e.$route.name},null,8,["step"]),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("div",O,[j,Object(n["createElementVNode"])("button",{class:"btn hover-red px-3 mx-2",type:"button",title:"清空購物車",onClick:t[0]||(t[0]=function(){return o.openModal&&o.openModal.apply(o,arguments)})},h)]),x]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(r.carts.carts,(function(t,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t.id},[Object(n["createElementVNode"])("div",N,Object(n["toDisplayString"])(c+1)+" /",1),Object(n["createElementVNode"])("div",g,Object(n["toDisplayString"])(t.product.title),1),Object(n["createElementVNode"])("div",E,[V,Object(n["createElementVNode"])("div",y,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-control form-control-sm",type:"number",min:"1",step:"1","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return o.updateCart(t.id,t.qty)},disabled:r.status===t.id},null,40,k),[[n["vModelText"],t.qty]]),Object(n["createElementVNode"])("div",C,"x"+Object(n["toDisplayString"])(t.product.unit),1)])]),Object(n["createElementVNode"])("div",w,[B,Object(n["createElementVNode"])("div",null,"NT$ "+Object(n["toDisplayString"])(e.$filters.currency(t.product.price)),1)]),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["col-3 col-md-2 d-flex align-items-end flex-column",{"text-success":"coupon"in t}])},[T,Object(n["createTextVNode"])("NT$ "+Object(n["toDisplayString"])(e.$filters.currency(t.final_total)),1)],2),Object(n["createElementVNode"])("div",S,[Object(n["createElementVNode"])("button",{class:"btn hover-red px-1 d-block w-100",type:"button",title:"刪除",onClick:function(e){return o.deleteCart(!1,t.id)}},D,8,$)]),_],64)})),128))]),Object(n["createElementVNode"])("div",z,[R,Object(n["createElementVNode"])("div",U,[Object(n["createElementVNode"])("div",P,[r.carts.total>r.carts.final_total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",q,[Object(n["createTextVNode"])("NT$ "+Object(n["toDisplayString"])(e.$filters.currency(r.carts.total)),1),I])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",J,[Object(n["createTextVNode"])("NT$ "+Object(n["toDisplayString"])(e.$filters.currency(r.carts.final_total)),1),F,r.carts.total>r.carts.final_total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("small",L,"已使用優惠卷")):Object(n["createCommentVNode"])("",!0)])])]),A,H,Object(n["createElementVNode"])("div",G,[Object(n["createElementVNode"])("form",{class:"hstack ms-auto my-auto",onSubmit:t[2]||(t[2]=Object(n["withModifiers"])((function(){return o.addCoupon&&o.addCoupon.apply(o,arguments)}),["prevent"]))},[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-control form-control-sm w-75 me-2",type:"text",placeholder:"E-Coupon","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.coupon=e})},null,512),[[n["vModelText"],r.coupon]]),Object(n["createElementVNode"])("button",{class:"btn btn-sm btn-outline-dark w-25",type:"submit",disabled:r.isUpdating},[r.isUpdating?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Q,X)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Y,"套用"))],8,K)],32)]),Z]),Object(n["createElementVNode"])("div",ee,[Object(n["createElementVNode"])("button",{class:"btn btn-cyan-600 text-light w-30",type:"button",onClick:t[3]||(t[3]=function(){return o.goOrder&&o.goOrder.apply(o,arguments)})},ne)])])])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(d,{ref:"alertModal",onEmitClear:o.deleteCart},null,8,["onEmitClear"])],64)}var re=c("1da1"),oe=(c("96cf"),c("99af"),c("d3b7"),c("e9c4"),c("b90a")),se=c("e6bb"),le={metaInfo:{title:"購物車"},data:function(){return{carts:{},coupon:"",status:"",isUpdating:!1}},components:{ProgressBar:oe["a"],AlertModal:se["a"]},inject:["pushToast","scrollTop"],methods:{getCart:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){var c,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/cart\n      "),t.prev=1,t.next=4,fetch(c);case 4:return n=t.sent,t.next=7,n.json();case 7:a=t.sent,e.carts=a.data,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()},openModal:function(){this.$refs.alertModal.showModal()},deleteCart:function(){var e=arguments,t=this;return Object(re["a"])(regeneratorRuntime.mark((function c(){var n,a,r,o,s;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return n=!(e.length>0&&void 0!==e[0])||e[0],a=e.length>1?e[1]:void 0,r=n?"".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/carts"):"\n          ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/cart/").concat(a,"\n        "),c.prev=3,c.next=6,fetch(r,{method:"delete"});case 6:return o=c.sent,c.next=9,o.json();case 9:s=c.sent,t.pushToast(s,"購物車"),t.getCart(),c.next=17;break;case 14:c.prev=14,c.t0=c["catch"](3),console.error(c.t0);case 17:case"end":return c.stop()}}),c,null,[[3,14]])})))()},addCoupon:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){var c,n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isUpdating=!0,c="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/coupon\n      "),n={data:{code:e.coupon}},t.prev=3,t.next=6,fetch(c,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:return a=t.sent,t.next=9,a.json();case 9:r=t.sent,e.pushToast(r,"優惠卷"),e.getCart(),e.coupon="",t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](3),console.error(t.t0);case 18:e.isUpdating=!1;case 19:case"end":return t.stop()}}),t,null,[[3,15]])})))()},updateCart:function(e,t){var c=this;return Object(re["a"])(regeneratorRuntime.mark((function n(){var a,r,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c.status=e,a="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/cart/").concat(e,"\n      "),r={data:{product_id:e,qty:t}},n.prev=3,n.next=6,fetch(a,{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 6:return o=n.sent,n.next=9,o.json();case 9:s=n.sent,c.pushToast(s,"購物車"),c.getCart(),c.status="",n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](3),console.error(n.t0);case 18:case"end":return n.stop()}}),n,null,[[3,15]])})))()},goOrder:function(){this.$router.push("/order")}},created:function(){this.scrollTop(),this.getCart()}},ie=(c("c830"),c("6b0d")),de=c.n(ie);const ue=de()(le,[["render",ae],["__scopeId","data-v-3d97ae62"]]);t["default"]=ue}}]);
//# sourceMappingURL=chunk-35ed70ae.51b6008b.js.map