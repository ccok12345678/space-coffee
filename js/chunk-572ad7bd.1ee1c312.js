(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-572ad7bd"],{1967:function(e,t,c){"use strict";c("a2f2")},"25f8":function(e,t,c){"use strict";c.r(t);c("b0c0");var r=c("7a23"),a={class:"container-lg my-4"},s={key:0,class:"row justify-content-center"},n={class:"col-md-10 d-flex flex-column align-items-center"},o=Object(r["createElementVNode"])("h4",{class:"text-gray-700"},"已建立訂單",-1),l=Object(r["createElementVNode"])("div",{class:"divider w-25 boder-dark my-3"},null,-1),i={class:"row w-100"},d=Object(r["createElementVNode"])("div",{class:"col-3 d-flex justify-content-center align-items-center fw-bold border p-0"},"訂單日期",-1),b={class:"col-9 border py-2"},m=Object(r["createElementVNode"])("div",{class:"col-3 d-flex justify-content-center align-items-center fw-bold border p-0"},"訂單編號",-1),u={class:"col-9 border py-2"},O=Object(r["createElementVNode"])("div",{class:"col-3 d-flex justify-content-center align-items-center fw-bold border p-0"},"訂單內容",-1),j={class:"col-9 border py-2"},p=Object(r["createElementVNode"])("div",{class:"col-3 d-flex justify-content-center align-items-center fw-bold border p-0"},"訂單金額",-1),f={class:"col-9 border py-2"},y=Object(r["createElementVNode"])("div",{class:"col-3 d-flex justify-content-center align-items-center fw-bold border p-0"},"付款狀態",-1),g={class:"col-9 border py-2"},v={key:0,class:"text-info"},h={key:1},E=Object(r["createElementVNode"])("span",{class:"text-danger me-2"},"未付款",-1),k=["disabled"],N=Object(r["createTextVNode"])("進行付款"),V={key:0,class:"spinner-border spinner-border-sm"},x=Object(r["createElementVNode"])("div",{class:"visually-hidden"},"Loading...",-1),P=[x],w=Object(r["createElementVNode"])("div",{class:"col-3 d-flex justify-content-center align-items-center fw-bold border p-0"},"聯絡資訊",-1),B={class:"col-9 border py-2"},C={class:"mb-1"},S={class:"mb-1"},D={class:"mb-1"},$={class:"mb-1"},T=Object(r["createElementVNode"])("div",{class:"col-3 d-flex justify-content-center align-items-center fw-bold border p-0"},"其他",-1),M={class:"col-9 border py-2"},z=Object(r["createTextVNode"])("察看其他訂單");function I(e,t,c,x,I,_){var R=Object(r["resolveComponent"])("ProgressBar"),L=Object(r["resolveComponent"])("router-link"),F=Object(r["resolveComponent"])("PayModal");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("div",a,[I.order.user?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",s,[Object(r["createElementVNode"])("div",n,[Object(r["createVNode"])(R,{step:e.$route.name,isPaid:I.order.is_paid},null,8,["step","isPaid"]),o,l,Object(r["createElementVNode"])("main",i,[d,Object(r["createElementVNode"])("div",b,Object(r["toDisplayString"])(e.$filters.date(I.order.create_at)),1),m,Object(r["createElementVNode"])("div",u,Object(r["toDisplayString"])(I.order.id),1),O,Object(r["createElementVNode"])("div",j,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(I.order.products,(function(e,t,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])("p",{class:"mb-1",key:t},Object(r["toDisplayString"])(c+1)+"、"+Object(r["toDisplayString"])(e.product.title)+"（"+Object(r["toDisplayString"])(e.product.unit)+"），數量："+Object(r["toDisplayString"])(e.qty),1)})),128))]),p,Object(r["createElementVNode"])("div",f,"NT$ "+Object(r["toDisplayString"])(e.$filters.currency(I.order.total)),1),y,Object(r["createElementVNode"])("div",g,[I.order.is_paid?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",v,"已付款")):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",h,[E,Object(r["createElementVNode"])("button",{class:"btn btn-cyan-600 text-light",type:"button",onClick:t[0]||(t[0]=function(){return _.openModal&&_.openModal.apply(_,arguments)}),disabled:I.isPaying},[N,I.isPaying?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",V,P)):Object(r["createCommentVNode"])("",!0)],8,k)]))]),w,Object(r["createElementVNode"])("div",B,[Object(r["createElementVNode"])("p",C,"姓名："+Object(r["toDisplayString"])(e.$filters.userName(I.order.user.name)),1),Object(r["createElementVNode"])("p",S,"電話："+Object(r["toDisplayString"])(e.$filters.userPhone(I.order.user.tel)),1),Object(r["createElementVNode"])("p",D,"E-Mail："+Object(r["toDisplayString"])(e.$filters.userEmail(I.order.user.email)),1),Object(r["createElementVNode"])("p",$,"收件地址："+Object(r["toDisplayString"])(e.$filters.userAddress(I.order.user.address)),1)]),T,Object(r["createElementVNode"])("div",M,[Object(r["createVNode"])(L,{class:"text-decoration-none",to:{name:"UserOrders"}},{default:Object(r["withCtx"])((function(){return[z]})),_:1})])])])])):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])(F,{ref:"payModal",order:I.order,isPaying:I.isPaying,onEmitPay:_.payOrder},null,8,["order","isPaying","onEmitPay"])],64)}var _=c("1da1"),R=(c("96cf"),c("99af"),c("d3b7"),c("b90a")),L={class:"modal fade",tabindex:"-1",ref:"modal"},F={class:"modal-dialog modal-dialog-centered"},J={class:"modal-content"},q={class:"modal-body text-center py-4"},A={key:0,class:"mb-0"},U={key:1,class:"mb-0 text-success"},G={key:0,class:"modal-footer"},H=Object(r["createElementVNode"])("button",{class:"btn btn-outline-danger w-25",typpe:"button","data-bs-dismiss":"modal"},[Object(r["createElementVNode"])("i",{class:"bi bi-x-circle me-2"}),Object(r["createTextVNode"])("取消")],-1),K=["disabled"],Q={key:0,class:"spinner-border spinner-border-sm"},W=Object(r["createElementVNode"])("div",{class:"visually-hidden"},"Loading...",-1),X=[W],Y={key:1,class:"bi bi-bag-check me-2"},Z=Object(r["createTextVNode"])("付款"),ee={key:1,class:"modal-footer"},te=Object(r["createElementVNode"])("button",{class:"btn btn-cyan text-light w-25",typpe:"button","data-bs-dismiss":"modal"},[Object(r["createElementVNode"])("i",{class:"bi bi-check-circle me-2"}),Object(r["createTextVNode"])("確認")],-1),ce=[te];function re(e,t,c,a,s,n){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",L,[Object(r["createElementVNode"])("div",F,[Object(r["createElementVNode"])("div",J,[Object(r["createElementVNode"])("div",q,[s.isPaid?(Object(r["openBlock"])(),Object(r["createElementBlock"])("h5",U,"付款完成！")):(Object(r["openBlock"])(),Object(r["createElementBlock"])("h5",A,"確認進行付款？"))]),s.isPaid?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ee,ce)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",G,[H,Object(r["createElementVNode"])("button",{class:"btn btn-cyan-600 text-light w-25",type:"button",onClick:t[0]||(t[0]=function(){return n.checkPay&&n.checkPay.apply(n,arguments)}),disabled:c.isPaying},[c.isPaying?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Q,X)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("i",Y)),Z],8,K)]))])])],512)}var ae=c("e0ae"),se={data:function(){return{isPaid:!1,isNowPaying:!1}},mixins:[ae["a"]],props:{order:{type:Object,dufault:function(){return{}}},isPaying:{type:Boolean,default:function(){return!1}}},watch:{order:function(){this.isPaid=this.order.is_paid},isPaying:function(){this.isNowPaying=this.isPaying}},methods:{checkPay:function(){this.$emit("emit-pay")}}},ne=c("6b0d"),oe=c.n(ne);const le=oe()(se,[["render",re]]);var ie=le,de={metaInfo:{title:"已建立訂單"},data:function(){return{orderId:"",order:{},isPaying:!1}},components:{ProgressBar:R["a"],PayModal:ie},inject:["pushToast","scrollTop"],methods:{getOrder:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var c,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/order/").concat(e.orderId,"\n      "),t.prev=1,t.next=4,fetch(c);case 4:return r=t.sent,t.next=7,r.json();case 7:a=t.sent,a.success&&(e.order=a.order),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()},openModal:function(){this.$refs.payModal.showModal()},payOrder:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var c,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isPaying=!0,c="\n        ".concat("https://vue3-course-api.hexschool.io","/api/").concat("ccok-api","/pay/").concat(e.orderId,"\n      "),t.prev=2,t.next=5,fetch(c,{method:"post"});case 5:return r=t.sent,t.next=8,r.json();case 8:a=t.sent,e.pushToast(a,"訂單"),e.getOrder(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),console.error(t.t0);case 16:e.isPaying=!1;case 17:case"end":return t.stop()}}),t,null,[[2,13]])})))()}},created:function(){this.scrollTop(),this.orderId=this.$route.params.orderId,this.getOrder()}};const be=oe()(de,[["render",I]]);t["default"]=be},a2f2:function(e,t,c){},b90a:function(e,t,c){"use strict";var r=c("7a23"),a={class:"progress-bar flex-nowarp mx-auto mb-4 text-nowrap"},s={class:"d-flex flex-column align-items-center"},n=Object(r["createElementVNode"])("div",{class:"m-auto"},"1",-1),o=[n],l=Object(r["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2 mx-1"},"購物車",-1),i={class:"d-flex mb-4"},d={class:"d-flex flex-column align-items-center"},b=Object(r["createElementVNode"])("div",{class:"m-auto"},"2",-1),m=[b],u=Object(r["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2"},"填寫資料",-1),O={class:"d-flex mb-4"},j={class:"d-flex flex-column align-items-center"},p=Object(r["createElementVNode"])("div",{class:"m-auto"},"3",-1),f=[p],y=Object(r["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2"},"建立訂單",-1),g={class:"d-flex mb-4"},v={class:"d-flex flex-column align-items-center"},h=Object(r["createElementVNode"])("div",{class:"m-auto"},"4",-1),E=[h],k=Object(r["createElementVNode"])("div",{class:"text-gray-700 fs-12 mt-2"},"付款完成",-1);function N(e,t,c,n,b,p){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",a,[Object(r["createElementVNode"])("div",s,[Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":b.status.isCart}])},o,2),l]),Object(r["createElementVNode"])("div",i,[Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["bar m-auto border-secondary",{"border-info":b.status.isOrder}])},null,2)]),Object(r["createElementVNode"])("div",d,[Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":b.status.isOrder}])},m,2),u]),Object(r["createElementVNode"])("div",O,[Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["bar m-auto border-secondary",{"border-info":b.status.isCheck}])},null,2)]),Object(r["createElementVNode"])("div",j,[Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":b.status.isCheck}])},f,2),y]),Object(r["createElementVNode"])("div",g,[Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["bar m-auto border-secondary",{"border-info":c.isPaid}])},null,2)]),Object(r["createElementVNode"])("div",v,[Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["rounded-circle text-light circle bg-secondary d-flex",{"bg-info":c.isPaid}])},E,2),k])])}var V={data:function(){return{status:{isCart:!0,isOrder:!1,isCheck:!1},isPay:!1}},props:{step:{type:String,default:function(){return""}},isPaid:{type:Boolean,default:function(){return!1}}},created:function(){switch(this.step){case"Cart":this.status.isCart=!0,this.status.isOrder=!1,this.status.isCheck=!1;break;case"Order":this.status.isCart=!0,this.status.isOrder=!0,this.status.isCheck=!1;break;case"Check":this.status.isCart=!0,this.status.isOrder=!0,this.status.isCheck=!0;break;default:this.status.isCart=!1,this.status.isOrder=!1,this.status.isCheck=!1;break}}},x=(c("1967"),c("6b0d")),P=c.n(x);const w=P()(V,[["render",N]]);t["a"]=w}}]);
//# sourceMappingURL=chunk-572ad7bd.1ee1c312.js.map